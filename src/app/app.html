<!-- Google Cloud Console Style -->
<div style="font-family: 'Google Sans', 'Roboto', Arial, sans-serif; color: #202124; background-color: #ffffff; min-height: 100vh;">
  <!-- Header -->
  <div style="background-color: #f8f9fa; border-bottom: 1px solid #dadce0; padding: 0 24px; height: 64px; display: flex; align-items: center; justify-content: space-between;">
    <div style="display: flex; align-items: center;">
      <div style="font-size: 20px; font-weight: 500; color: #202124;">{{ title }}</div>
    </div>
    <div style="display: flex; align-items: center; gap: 16px;">
      <div *ngIf="user" style="font-size: 14px; color: #5f6368;">{{ user.name }} ({{ user.email }})</div>
      <button *ngIf="token" (click)="logout()" 
              style="background: none; border: 1px solid #dadce0; color: #202124; padding: 8px 16px; border-radius: 4px; font-size: 14px; cursor: pointer;">
        Logout
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div style="padding: 24px; max-width: 1200px; margin: 0 auto;">
    <!-- Login Section -->
    <div *ngIf="!token" style="text-align: center; padding: 48px;">
      <h1 style="margin: 0 0 24px 0; font-size: 32px; font-weight: 500; color: #202124;">Welcome to VibeCoding GCP Console</h1>
      <p style="color: #5f6368; font-size: 16px; margin-bottom: 32px;">Sign in to manage your Google Cloud Platform resources</p>
      <button (click)="login()" 
              style="background-color: #1a73e8; color: white; border: none; padding: 12px 24px; border-radius: 4px; font-size: 16px; cursor: pointer; display: flex; align-items: center; margin: 0 auto;">
        <span style="margin-right: 8px;">üîê</span> Sign in with Google
      </button>
    </div>

    <!-- Authenticated Content -->
    <div *ngIf="token">
      <!-- Permission Update Notification -->
      <div *ngIf="showPermissionNotification" 
           style="background-color: #fff3cd; border: 1px solid #ffeaa7; color: #856404; padding: 16px; margin-bottom: 24px; border-radius: 4px; font-size: 14px;">
        <strong>Permission Update Required:</strong> To create VPC networks, you need to re-authenticate with write permissions. 
        <button (click)="forceReauth()" 
                style="margin-left: 12px; background-color: #1a73e8; color: white; border: none; padding: 8px 16px; border-radius: 4px; font-size: 14px; cursor: pointer;">
          Re-authenticate
        </button>
        <button (click)="dismissPermissionNotification()" 
                style="margin-left: 8px; background-color: #6c757d; color: white; border: none; padding: 8px 16px; border-radius: 4px; font-size: 14px; cursor: pointer;">
          Dismiss
        </button>
      </div>

      <!-- Navigation -->
      <div *ngIf="currentPage !== 'vpc-details' && currentPage !== 'vpc-wizard'" 
           style="margin-bottom: 24px; border-bottom: 1px solid #dadce0; padding-bottom: 16px;">
        <div style="display: flex; gap: 8px;">
          <button 
            (click)="navigateToVmList()" 
            [style.background-color]="currentPage === 'vm-list' ? '#1a73e8' : '#ffffff'"
            [style.color]="currentPage === 'vm-list' ? 'white' : '#202124'"
            [style.border-color]="currentPage === 'vm-list' ? '#1a73e8' : '#dadce0'"
            style="padding: 8px 16px; border: 1px solid; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500;">
            VM Instances
          </button>
          <button 
            (click)="navigateToVpcList()" 
            [style.background-color]="currentPage === 'vpc-list' ? '#1a73e8' : '#ffffff'"
            [style.color]="currentPage === 'vpc-list' ? 'white' : '#202124'"
            [style.border-color]="currentPage === 'vpc-list' ? '#1a73e8' : '#dadce0'"
            style="padding: 8px 16px; border: 1px solid; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500;">
            VPC Networks
          </button>
        </div>
      </div>

      <!-- VM List Page -->
      <div *ngIf="currentPage === 'vm-list'">
        <div style="background-color: #ffffff; border: 1px solid #dadce0; border-radius: 8px; padding: 24px; margin-bottom: 24px;">
          <h3 style="margin: 0 0 20px 0; font-size: 18px; font-weight: 500; color: #202124;">VM Instance Management</h3>
          
          <div style="display: grid; grid-template-columns: 1fr auto; gap: 16px; margin-bottom: 20px; align-items: end;">
            <div>
              <label style="display: block; margin-bottom: 8px; font-size: 14px; font-weight: 500; color: #202124;">Project ID</label>
              <input [(ngModel)]="project" type="text" 
                     style="width: 100%; padding: 12px; border: 1px solid #dadce0; border-radius: 4px; font-size: 14px; box-sizing: border-box;">
            </div>
            <div>
              <button (click)="listVMs()" 
                      style="background-color: #1a73e8; color: white; border: none; padding: 12px 24px; border-radius: 4px; font-size: 14px; cursor: pointer;">
                List VMs from All Zones
              </button>
            </div>
          </div>
        </div>

        <div *ngIf="error" 
             style="background-color: #fce8e6; border: 1px solid #f28b82; color: #c5221f; padding: 12px 16px; border-radius: 4px; margin-bottom: 24px; font-size: 14px;">
          {{ error }}
        </div>

        <div *ngIf="vms.length" style="background-color: #ffffff; border: 1px solid #dadce0; border-radius: 8px; overflow: hidden;">
          <div style="padding: 20px; border-bottom: 1px solid #dadce0; background-color: #f8f9fa;">
            <h3 style="margin: 0; font-size: 16px; font-weight: 500; color: #202124;">VM Instances ({{ vms.length }})</h3>
          </div>
          <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr style="background-color: #f8f9fa;">
                  <th style="padding: 12px 16px; text-align: left; border-bottom: 1px solid #dadce0; font-size: 14px; font-weight: 500; color: #202124;">Name</th>
                  <th style="padding: 12px 16px; text-align: left; border-bottom: 1px solid #dadce0; font-size: 14px; font-weight: 500; color: #202124;">Status</th>
                  <th style="padding: 12px 16px; text-align: left; border-bottom: 1px solid #dadce0; font-size: 14px; font-weight: 500; color: #202124;">IP Address</th>
                  <th style="padding: 12px 16px; text-align: left; border-bottom: 1px solid #dadce0; font-size: 14px; font-weight: 500; color: #202124;">Network</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let vm of vms" style="border-bottom: 1px solid #dadce0;">
                  <td style="padding: 12px 16px; font-size: 14px; color: #202124;">{{ vm.name }}</td>
                  <td style="padding: 12px 16px; font-size: 14px;">
                    <span [style.color]="vm.status === 'RUNNING' ? '#34a853' : vm.status === 'STOPPED' ? '#ea4335' : '#fbbc04'"
                          style="font-weight: 500;">
                      {{ vm.status }}
                    </span>
                  </td>
                  <td style="padding: 12px 16px; font-size: 14px; color: #202124;">
                    <span *ngIf="vm.networkInterfaces && vm.networkInterfaces.length > 0">
                      {{ vm.networkInterfaces[0].accessConfigs && vm.networkInterfaces[0].accessConfigs.length > 0 ? 
                         vm.networkInterfaces[0].accessConfigs[0].natIP : 
                         vm.networkInterfaces[0].networkIP || 'N/A' }}
                    </span>
                    <span *ngIf="!vm.networkInterfaces || vm.networkInterfaces.length === 0">N/A</span>
                  </td>
                  <td style="padding: 12px 16px; font-size: 14px; color: #202124;">
                    <span *ngIf="vm.networkInterfaces && vm.networkInterfaces.length > 0">
                      {{ vm.networkInterfaces[0].network.split('/').pop() || 'N/A' }}
                    </span>
                    <span *ngIf="!vm.networkInterfaces || vm.networkInterfaces.length === 0">N/A</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div *ngIf="!vms.length && !error" 
             style="background-color: #ffffff; border: 1px solid #dadce0; border-radius: 8px; padding: 48px; text-align: center;">
          <p style="color: #5f6368; font-size: 14px; margin: 0;">No VMs found or not yet listed.</p>
        </div>
      </div>

      <!-- VPC List Page -->
      <div *ngIf="currentPage === 'vpc-list'">
        <app-vpc-list></app-vpc-list>
      </div>

      <!-- VPC Details Page -->
      <div *ngIf="currentPage === 'vpc-details'">
        <app-vpc-details></app-vpc-details>
      </div>

      <!-- VPC Wizard Page -->
      <div *ngIf="currentPage === 'vpc-wizard'">
        <app-vpc-wizard></app-vpc-wizard>
      </div>
    </div>
  </div>
</div>


